$(function(){var clickHandler,executeOnaItLaterScript;return executeOnaItLaterScript=function(infoStr){var keys;return keys=["token"],chrome.storage.sync.get(keys,function(item){return console.log(item),void 0===item.token?void alert("optionページからトークンを入力してください"):(console.log(item.token),chrome.tabs.executeScript(null,{file:"bower_components/jquery/dist/jquery.min.js"},function(){return chrome.tabs.executeScript(null,{file:"bower_components/alertify.js/lib/alertify.min.js"},function(){return chrome.tabs.insertCSS(null,{file:"bower_components/alertify.js/themes/alertify.core.css"},function(){return chrome.tabs.insertCSS(null,{file:"bower_components/alertify.js/themes/alertify.default.css"},function(){return chrome.tabs.executeScript(null,{code:"var info = "+infoStr+";"},function(){return chrome.tabs.executeScript(null,{file:"build/js/content.js"},function(){console.log("Script injected.")})})})})})}))})},chrome.browserAction.onClicked.addListener(function(tab){return executeOnaItLaterScript(null)}),clickHandler=function(info,tab){var infoStr;return console.log(info),infoStr=JSON.stringify(info),console.log(infoStr),executeOnaItLaterScript(infoStr)},chrome.contextMenus.create({title:"Save to Ona it Later",contexts:["image"],id:"image"}),chrome.contextMenus.onClicked.addListener(clickHandler),chrome.runtime.onMessage.addListener(function(request,sender,sendResponse){return chrome.browserAction.setIcon({path:request.newIconPath,tabId:sender.tab.id})}),chrome.commands.onCommand.addListener(function(command){return console.log(command),executeOnaItLaterScript(null)})});