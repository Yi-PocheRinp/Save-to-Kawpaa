$(function(){var clickHandler,contexts,executeOnaItLaterScript;return executeOnaItLaterScript=function(infoStr){return chrome.storage.sync.get(["token"],function(item){return void 0!==item.token&&""!==item.token?chrome.tabs.executeScript(null,{file:"bower_components/jquery/dist/jquery.min.js"},function(){return chrome.tabs.executeScript(null,{file:"bower_components/alertify.js/lib/alertify.min.js"},function(){return chrome.tabs.insertCSS(null,{file:"bower_components/alertify.js/themes/alertify.core.css"},function(){return chrome.tabs.insertCSS(null,{file:"bower_components/alertify.js/themes/alertify.default.css"},function(){return chrome.tabs.executeScript(null,{code:"var info = "+infoStr+";"},function(){return chrome.tabs.executeScript(null,{file:"build/js/content.js"},function(){})})})})})}):void 0})},chrome.browserAction.onClicked.addListener(function(tab){return executeOnaItLaterScript(null)}),clickHandler=function(info,tab){var infoStr;return infoStr=JSON.stringify(info),executeOnaItLaterScript(infoStr)},contexts=["page","image"],contexts.forEach(function(context){var title;return title="Save to Kawpaa with "+context,chrome.contextMenus.create({title:title,contexts:[context],id:context})}),chrome.contextMenus.onClicked.addListener(clickHandler),chrome.runtime.onMessage.addListener(function(request,sender,sendResponse){var infoStr;return"twitter"===request.name?(infoStr=JSON.stringify(request.info),executeOnaItLaterScript(infoStr),void sendResponse("ok")):chrome.browserAction.setIcon({path:request.newIconPath,tabId:sender.tab.id})}),chrome.commands.onCommand.addListener(function(command){return executeOnaItLaterScript(null)})});